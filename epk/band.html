<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>My first three.js app</title>
    <style>
@font-face {
  font-family: 'Matrix';
  src: url('./LcdSolid-VPzB.ttf') format('truetype'),
  /* Add additional font formats if needed */
}

      
  body { margin: 0; }
  .arrow {
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    width: 50px;
    height: 50px;
    cursor: pointer;
    outline: none;
  }

  #leftArrow {
    left: 5%;
    transform: translateX(-50%);
    background: url('left.png') no-repeat center center;
    background-size: cover;
    color: green;
    width: 50px;
    height: 50px;
  }

  #rightArrow {
    right: 5%;
    transform: translateX(50%);
    background: url('right.png') no-repeat center center;
    background-size: cover;
    color: green;
    width: 50px;
    height: 50px;
  }
  .matrix-text {
    position: absolute;
    font-family: 'Matrix', sans-serif;
    color: #00FF00; /* Green color */
    font-size: 20px;
  }

  #textNearObject {
    left: 20%; /* Adjust the left positioning as needed */
    top: 20%; /* Adjust the top positioning as needed */
  }
    </style>
  </head>	
  <body>
    <div class="matrix-text" id="textNearObject">MATRIX</div>
    <script type="importmap">
      {
        "imports": {
          "three": "https://unpkg.com/three@v0.161.0/build/three.module.js",
          "three/addons/": "https://unpkg.com/three@v0.161.0/examples/jsm/"
         }
      }
    </script>
    <script type="module">
      import * as THREE from 'three';
      import { GLTFLoader } from 'three/addons/loaders/GLTFLoader.js';

      const bgcolor = new THREE.Color( 0x202020 );
      var scene = new THREE.Scene();
      scene.background = bgcolor;
      var camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
      var renderer = new THREE.WebGLRenderer();

      var descriptions = {
        "raf_low_poly": "Very LOUD \n Special ability: Brain hemorrage",
        "fede_low_poly": "Very FAST",
        "marti_low_poly": "Mumbles a lot. What is he saying?",
        "fardi_low_poly": "Oh yes its called the Microcosm"
      }

      var sizes = {
          "raf_low_poly": 1,
          "fede_low_poly": 1.6,
          "marti_low_poly": 1.5,
        "fardi_low_poly": 1.2
      }

      renderer.setSize(window.innerWidth, window.innerHeight);
      document.body.appendChild(renderer.domElement);
      var models = ['./raf_low_poly.glb', './marti_low_poly.glb', './fede_low_poly.glb', 'fardi_low_poly.glb']; // Add paths to your models
      var currentModelIndex = 0;
      var model;

      // Load initial model
      loadModel(models[currentModelIndex]).then(() => {
        // Add arrows
        var leftArrow = createArrow('leftArrow');
        var rightArrow = createArrow('rightArrow');

        leftArrow.addEventListener('click', function () {
          changeModel(-1);
        });

        rightArrow.addEventListener('click', function () {
          changeModel(1);
        });

        document.body.appendChild(leftArrow);
        document.body.appendChild(rightArrow);

        // Add Matrix-style text
        var textNearObject = createMatrixText('textNearObject');
        document.body.appendChild(textNearObject);

        // Add a directional light
        var light = new THREE.DirectionalLight(0xffffff);
        light.position.set(1, 1, 1).normalize();
        var alight = new THREE.AmbientLight(0xffa0ff);
        scene.add(light);  
        scene.add(alight);

        camera.position.z = 5;

        var animate = function () {
          requestAnimationFrame(animate);

          // Add rotation or any other animation logic here
          // Example: model.rotation.x += 1.01;
          if (model) {
            model.rotation.y += 0.01;
          }

          renderer.render(scene, camera);
        };

        animate();
      });

      function loadModel(modelPath) {
        return new Promise((resolve) => {
	  scene.remove(model);
          var loader = new GLTFLoader();
          loader.load(modelPath, function (gltf) {
            model = gltf.scene;
	    var modelName = modelPath.split('/').pop().split('.')[0];
            model.scale.set(sizes[modelName], sizes[modelName], sizes[modelName]);
            scene.add(model);
            document.getElementById('textNearObject').innerText = descriptions[modelName];
            resolve();
          });
        });
      }

      function createArrow(id) {
        var arrow = document.createElement('div');
        arrow.id = id;
        arrow.className = 'arrow';
        return arrow;
      }

      function createMatrixText(id) {
        var matrixText = document.createElement('div');
        matrixText.id = id;
        matrixText.className = 'matrix-text';
        return matrixText;
      }

      function changeModel(direction) {
        currentModelIndex = (currentModelIndex + direction) % models.length;
        // Load and add the new model to the scene
        loadModel(models[currentModelIndex]);
	}
    </script>
  </body>
</html>
